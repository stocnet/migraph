<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Diffusion metrics for networks — net_diffusion • migraph</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Diffusion metrics for networks — net_diffusion"><meta property="og:description" content="These functions allow measurement of various features of
a diffusion process:
network_transmissibility() measures the average transmissibility observed
in a diffusion simulation, or the number of new infections over
the number of susceptible nodes.
network_infection_length() measures the average number of time steps
nodes remain infected once they become infected.
network_reproduction() measures the observed reproductive number
in a diffusion simulation as the network's transmissibility over
the network's average infection length.
network_immunity() measures the proportion of nodes that would need
to be protected through vaccination, isolation, or recovery for herd immunity to be reached.
network_hazard() measures the hazard rate or instantaneous probability that
nodes will adopt/become infected at that time

"><meta property="og:image" content="https://snlab-ch.github.io/migraph/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Function Overview</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/snlab-ch/migraph" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Diffusion metrics for networks</h1>
    <small class="dont-index">Source: <a href="https://github.com/snlab-ch/migraph/blob/HEAD/R/measure_diffusion.R" class="external-link"><code>R/measure_diffusion.R</code></a></small>
    <div class="hidden name"><code>net_diffusion.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions allow measurement of various features of
a diffusion process:</p><ul><li><p><code>network_transmissibility()</code> measures the average transmissibility observed
in a diffusion simulation, or the number of new infections over
the number of susceptible nodes.</p></li>
<li><p><code>network_infection_length()</code> measures the average number of time steps
nodes remain infected once they become infected.</p></li>
<li><p><code>network_reproduction()</code> measures the observed reproductive number
in a diffusion simulation as the network's transmissibility over
the network's average infection length.</p></li>
<li><p><code>network_immunity()</code> measures the proportion of nodes that would need
to be protected through vaccination, isolation, or recovery for herd immunity to be reached.</p></li>
<li><p><code>network_hazard()</code> measures the hazard rate or instantaneous probability that
nodes will adopt/become infected at that time</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network_transmissibility</span><span class="op">(</span><span class="va">diff_model</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network_infection_length</span><span class="op">(</span><span class="va">diff_model</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network_reproduction</span><span class="op">(</span><span class="va">diff_model</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network_immunity</span><span class="op">(</span><span class="va">diff_model</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network_hazard</span><span class="op">(</span><span class="va">diff_model</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="source">
    <h2>Source</h2>
    <p><code>{netdiffuseR}</code></p>
    </div>
    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>diff_model</dt>
<dd><p>A valid network diffusion model,
as created by <code><a href="play.html">as_diffusion()</a></code> or <code><a href="play.html">play_diffusion()</a></code>.</p></dd>

</dl></div>
    <div id="transmissibility">
    <h2>Transmissibility</h2>
    

<p><code>network_transmissibility()</code> measures how many directly susceptible nodes
each infected node will infect in each time period, on average.
That is:
$$T = \frac{1}{n}\sum_{j=1}^n \frac{i_{j}}{s_{j}}$$
where \(i\) is the number of new infections in each time period, \(j \in n\),
and \(s\) is the number of nodes that could have been infected in that time period
(note that \(s \neq S\), or
the number of nodes that are susceptible in the population).
\(T\) can be interpreted as the proportion of susceptible nodes that are
infected at each time period.</p>
    </div>
    <div id="infection-length">
    <h2>Infection length</h2>
    

<p><code>network_infection_length()</code> measures the average number of time steps that
nodes in a network remain infected.
Note that in a diffusion model without recovery, average infection length
will be infinite.
This will also be the case where there is right censoring.
The longer nodes remain infected, the longer they can infect others.</p>
    </div>
    <div id="reproduction-number">
    <h2>Reproduction number</h2>
    

<p><code>network_reproduction()</code> measures a given diffusion's reproductive number.
Here it is calculated as:
$$R = \min\left(\frac{T}{1/IL}, \bar{k}\right)$$
where \(T\) is the observed transmissibility in a diffusion
and \(IL\) is the observed infection length in a diffusion.
Since \(IL\) can be infinite where there is no recovery
or there is right censoring,
and since network structure places an upper limit on how many
nodes each node may further infect (their degree),
this function returns the minimum of \(R_0\)
and the network's average degree.</p>
<p>Interpretation of the reproduction number is oriented around R = 1.
Where \(R &gt; 1\), the 'disease' will 'infect' more and more
nodes in the network.
Where \(R &lt; 1\), the 'disease' will not sustain itself and eventually
die out.
Where \(R = 1\), the 'disease' will continue as endemic,
if conditions allow.</p>
    </div>
    <div id="herd-immunity">
    <h2>Herd immunity</h2>
    

<p><code>network_immunity()</code> estimates the proportion of a network
that need to be protected from infection for herd immunity
to be achieved.
This is known as the Herd Immunity Threshold or HIT:
$$1 - \frac{1}{R}$$
where \(R\) is the reproduction number from <code>network_reproduction()</code>.
The HIT indicates the threshold at which
the reduction of susceptible members of the network means
that infections will no longer keep increasing.
Note that there may still be more infections after this threshold has been reached,
but there should be fewer and fewer.
These excess infections are called the <em>overshoot</em>.
This function does <em>not</em> take into account the structure
of the network, instead using the average degree.</p>
<p>Interpretation is quite straightforward.
A HIT or immunity score of 0.75 would mean that 75% of the nodes in the network
would need to be vaccinated or otherwise protected to achieve herd immunity.
To identify how many nodes this would be, multiply this proportion with the number
of nodes in the network.</p>
    </div>
    <div id="hazard-rate">
    <h2>Hazard rate</h2>
    

<p>The hazard rate is the instantaneous probability of adoption/infection at each time point (Allison 1984).
In survival analysis, hazard rate is formally defined as:</p>
<p>$$%
\lambda(t)=\lim_{h\to +0}\frac{F(t+h)-F(t)}{h}\frac{1}{1-F(t)} %
$$</p>
<p>By approximating \(h=1\), we can rewrite the equation as</p>
<p>$$%
\lambda(t)=\frac{F(t+1)-F(t)}{1-F(t)} %
$$</p>
<p>If we estimate \(F(t)\),
the probability of not having adopted the innovation in time \(t\),
from the proportion of adopters in that time,
such that \(F(t) \sim q_t/n\), we now have (ultimately for \(t&gt;1\)):</p>
<p>$$%
\lambda(t)=\frac{q_{t+1}/n-q_t/n}{1-q_t/n} = \frac{q_{t+1} - q_t}{n - q_t} = \frac{q_t - q_{t-1}}{n - q_{t-1}} %
$$</p>
<p>where \(q_i\) is the number of adopters in time \(t\),
and \(n\) is the number of vertices in the graph.</p>
<p>The shape of the hazard rate indicates the pattern of new adopters over time.
Rapid diffusion with convex cumulative adoption curves will have
hazard functions that peak early and decay over time.
Slow concave cumulative adoption curves will have
hazard functions that are low early and rise over time.
Smooth hazard curves indicate constant adoption whereas
those that oscillate indicate variability in adoption behavior over time.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Kermack, W. and McKendrick, A., 1927. "A contribution to the mathematical theory of epidemics".
<em>Proc. R. Soc. London A</em> 115: 700-721.</p>
<p>Allison, P. 1984. <em>Event history analysis regression for longitudinal event data</em>.
London: Sage Publications.</p>
<p>Wooldridge, J. M. 2010. <em>Econometric Analysis of Cross Section and Panel Data</em> (2nd ed.).
Cambridge: MIT Press.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other measures: 
<code><a href="between_centrality.html">between_centrality</a></code>,
<code><a href="close_centrality.html">close_centrality</a></code>,
<code><a href="closure.html">closure</a></code>,
<code><a href="cohesion.html">cohesion</a>()</code>,
<code><a href="degree_centrality.html">degree_centrality</a></code>,
<code><a href="eigenv_centrality.html">eigenv_centrality</a></code>,
<code><a href="features.html">features</a></code>,
<code><a href="heterogeneity.html">heterogeneity</a></code>,
<code><a href="hierarchy.html">hierarchy</a></code>,
<code><a href="holes.html">holes</a></code>,
<code><a href="node_diffusion.html">node_diffusion</a></code></p>
<p>Other diffusion: 
<code><a href="node_diffusion.html">node_diffusion</a></code>,
<code><a href="play.html">play</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="va">smeg</span> <span class="op">&lt;-</span> <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://snlab-ch.github.io/manynet/reference/generate.html" class="external-link">generate_smallworld</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">0.025</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">smeg_diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="play.html">play_diffusion</a></span><span class="op">(</span><span class="va">smeg</span>, recovery <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="net_diffusion-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span>  <span class="co"># To calculate the average transmissibility for a given diffusion model</span></span></span>
<span class="r-in"><span>  <span class="fu">network_transmissibility</span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NaN</span>
<span class="r-in"><span>  <span class="co"># To calculate the average infection length for a given diffusion model</span></span></span>
<span class="r-in"><span>  <span class="fu">network_infection_length</span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span>  <span class="co"># To calculate the reproduction number for a given diffusion model</span></span></span>
<span class="r-in"><span>  <span class="fu">network_reproduction</span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NaN</span>
<span class="r-in"><span>  <span class="co"># Calculating the proportion required to achieve herd immunity</span></span></span>
<span class="r-in"><span>  <span class="fu">network_immunity</span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NaN</span>
<span class="r-in"><span>  <span class="co"># To find the number of nodes to be vaccinated</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu">network_immunity</span><span class="op">(</span><span class="va">smeg_diff</span><span class="op">)</span> <span class="op">*</span> <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://snlab-ch.github.io/manynet/reference/properties.html" class="external-link">network_nodes</a></span><span class="op">(</span><span class="va">smeg</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NaN</span>
<span class="r-in"><span><span class="co"># To calculate the hazard rates at each time point</span></span></span>
<span class="r-in"><span><span class="fu">network_hazard</span><span class="op">(</span><span class="fu"><a href="play.html">play_diffusion</a></span><span class="op">(</span><span class="va">smeg</span>, transmissibility <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]         NA 0.07142857 0.15384615 0.18181818 0.22222222 0.14285714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] 0.16666667 0.20000000 0.25000000 0.33333333 0.00000000 0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 0.00000000 0.00000000 1.00000000        NaN</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

