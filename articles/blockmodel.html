<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Practical 5 • migraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Practical 5">
<meta property="og:description" content="migraph">
<meta property="og:image" content="https://snlab-ch.github.io/migraph/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/blockmodel.html">Practical 5</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/snlab-ch/migraph/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="blockmodel_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Practical 5</h1>
                        <h4 class="author">James Hollway</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/snlab-ch/migraph/blob/master/vignettes/blockmodel.Rmd"><code>vignettes/blockmodel.Rmd</code></a></small>
      <div class="hidden name"><code>blockmodel.Rmd</code></div>

    </div>

    
    
<div id="setting-up" class="section level1">
<h1 class="hasAnchor">
<a href="#setting-up" class="anchor"></a>Setting up</h1>
<p>For this lab, we’ll use a few different packages for data and analysis. We’re going to use the <code>ison_m182</code> dataset from last week, now directly from the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/snlab-ch/migraph">migraph</a></span><span class="op">)</span><span class="op">)</span> <span class="co"># note that you may need a special version for what follows...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"ison_m182"</span>, package <span class="op">=</span> <span class="st">"migraph"</span><span class="op">)</span></code></pre></div>
<p>The network is anonymous, but I think it would be nice to add some names, even if it’s just pretend. Luckily, I’ve added a function for this. This makes plotting the network just a wee bit more accessible:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ison_m182</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to.html">to_named</a></span><span class="op">(</span><span class="va">ison_m182</span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">ison_m182</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/addingnames-1.png" width="700"></p>
<p>There are actually three different types of tie here. Let’s separate them out into separate networks.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">m182_friend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to.html">to_uniplex</a></span><span class="op">(</span><span class="va">ison_m182</span>, <span class="st">"friend_tie"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tbl_graph: 16 nodes and 62 edges</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # A directed simple graph with 3 components</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Node Data: 16 × 1 (active)</span>
<span class="co">#&gt;   name   </span>
<span class="co">#&gt;   &lt;chr&gt;  </span>
<span class="co">#&gt; 1 Chance </span>
<span class="co">#&gt; 2 Orville</span>
<span class="co">#&gt; 3 Amber  </span>
<span class="co">#&gt; 4 Colton </span>
<span class="co">#&gt; 5 Phillip</span>
<span class="co">#&gt; 6 Patrick</span>
<span class="co">#&gt; # … with 10 more rows</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Edge Data: 62 × 3</span>
<span class="co">#&gt;    from    to friend_tie</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1     2     1          1</span>
<span class="co">#&gt; 2     2     7          1</span>
<span class="co">#&gt; 3     2     8          1</span>
<span class="co">#&gt; # … with 59 more rows</span>
<span class="va">gfriend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_friend</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Friendship"</span><span class="op">)</span>
<span class="op">(</span><span class="va">m182_social</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to.html">to_uniplex</a></span><span class="op">(</span><span class="va">ison_m182</span>, <span class="st">"social_tie"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tbl_graph: 16 nodes and 129 edges</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # A directed simple graph with 1 component</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Node Data: 16 × 1 (active)</span>
<span class="co">#&gt;   name   </span>
<span class="co">#&gt;   &lt;chr&gt;  </span>
<span class="co">#&gt; 1 Chance </span>
<span class="co">#&gt; 2 Orville</span>
<span class="co">#&gt; 3 Amber  </span>
<span class="co">#&gt; 4 Colton </span>
<span class="co">#&gt; 5 Phillip</span>
<span class="co">#&gt; 6 Patrick</span>
<span class="co">#&gt; # … with 10 more rows</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Edge Data: 129 × 3</span>
<span class="co">#&gt;    from    to social_tie</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     5       1.2 </span>
<span class="co">#&gt; 2     1     8       0.15</span>
<span class="co">#&gt; 3     1     9       2.85</span>
<span class="co">#&gt; # … with 126 more rows</span>
<span class="va">gsocial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_social</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Social"</span><span class="op">)</span>
<span class="op">(</span><span class="va">m182_task</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/to.html">to_uniplex</a></span><span class="op">(</span><span class="va">ison_m182</span>, <span class="st">"task_tie"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tbl_graph: 16 nodes and 88 edges</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # A directed simple graph with 1 component</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Node Data: 16 × 1 (active)</span>
<span class="co">#&gt;   name   </span>
<span class="co">#&gt;   &lt;chr&gt;  </span>
<span class="co">#&gt; 1 Chance </span>
<span class="co">#&gt; 2 Orville</span>
<span class="co">#&gt; 3 Amber  </span>
<span class="co">#&gt; 4 Colton </span>
<span class="co">#&gt; 5 Phillip</span>
<span class="co">#&gt; 6 Patrick</span>
<span class="co">#&gt; # … with 10 more rows</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Edge Data: 88 × 3</span>
<span class="co">#&gt;    from    to task_tie</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     5      0.3</span>
<span class="co">#&gt; 2     1     9      0.3</span>
<span class="co">#&gt; 3     1    10      0.3</span>
<span class="co">#&gt; # … with 85 more rows</span>
<span class="va">gtask</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_task</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Task"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">gfriend</span>, <span class="va">gsocial</span>, <span class="va">gtask</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/separatingnets-1.png" width="700"></p>
</div>
<div id="structural-holes-and-constraint" class="section level1">
<h1 class="hasAnchor">
<a href="#structural-holes-and-constraint" class="anchor"></a>Structural Holes and Constraint</h1>
<p>Where could innovation occur in these networks? Let’s take a look at which actors are least constrained by their position in the task network to begin with. <a href="https://github.com/snlab-ch/migraph">migraph</a> makes this easy enough with the <code>constraint()</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/node_constraint.html">node_constraint</a></span><span class="op">(</span><span class="va">m182_task</span><span class="op">)</span>
<span class="co">#&gt;    Chance   Orville     Amber    Colton   Phillip   Patrick    Irving     Betty </span>
<span class="co">#&gt; 0.4158571 0.4572800 0.5627214 0.6109751 0.3712394 0.4059926 0.5432901 0.5173988 </span>
<span class="co">#&gt;       Ada     Marie     Molly    Darius    Norman   Bernice     Carol     Ariel </span>
<span class="co">#&gt; 0.5110928 0.3814114 0.5627214 0.5244070 0.4763565 0.4089266 0.4514752 0.2159461</span></code></pre></div>
<p>We see that this function returns a vector of constraint scores that may range between 0 and 1. Let’s size the nodes according to this score, and identify the node with the minimum constraint score. Why minimum? and what can we learn from this plot about where innovation might occur within this network?</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/ggidentify.html">ggidentify</a></span><span class="op">(</span><span class="va">m182_task</span>, <span class="va">node_constraint</span>, <span class="va">min</span><span class="op">)</span>
<span class="co">#&gt; Using `stress` as default layout</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/constraintplot-1.png" width="700"></p>
</div>
<div id="structural-equivalence" class="section level1">
<h1 class="hasAnchor">
<a href="#structural-equivalence" class="anchor"></a>Structural Equivalence</h1>
<p>We’ll use the “task” and “social” sub-graphs together as the basis for structural equivalence. Before we can see how similar nodes are, we’ll have to convert them to adjacency matrices.</p>
<div id="constructing-a-multiplex-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-multiplex-matrix" class="anchor"></a>Constructing a multiplex matrix</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="fu"><a href="../reference/census.html">node_tie_census</a></span><span class="op">(</span><span class="va">ison_m182</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 96 16</span>
<span class="va">structural_combo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/census.html">node_tie_census</a></span><span class="op">(</span><span class="va">ison_m182</span><span class="op">)</span></code></pre></div>
<p>The result is a weighted matrix. What would you do if you wanted it to be binary?</p>
</div>
<div id="calculating-structural-dissimilarity" class="section level2">
<h2 class="hasAnchor">
<a href="#calculating-structural-dissimilarity" class="anchor"></a>Calculating structural (dis)similarity</h2>
<p>First of all, we need to cluster nodes by their structural equivalence. In summary, we’re going to hierarchically cluster the nodes based on the distances in dissimilarity in their out- and ingoing ties. Or you can just run the following line:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">str_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">cluster_structural_equivalence</a></span><span class="op">(</span><span class="va">structural_combo</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; stats::hclust(d = distances)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Cluster method   : complete </span>
<span class="co">#&gt; Number of objects: 16</span></code></pre></div>
<p>This object doesn’t seem to tell us much, but we can investigate it more using <a href="https://github.com/snlab-ch/migraph">migraph</a>’s <code><a href="../reference/blockmodel_visualisation.html">ggtree()</a></code>. This is a dendrogram of the hierarchical clustering object. Basically, as we move to the right, we’re allowing for more and more dissimilarity among those we cluster together. A fork or branching point indicates the level of dissimilarity at which those two or more nodes would be said to be equivalent.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggtree</a></span><span class="op">(</span><span class="va">str_res</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggtree</a></span><span class="op">(</span><span class="va">str_res</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># for example let's say there are just two main clusters</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/unnamed-chunk-2-2.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggtree</a></span><span class="op">(</span><span class="va">str_res</span>, <span class="fl">4</span><span class="op">)</span> <span class="co"># or four? what are we seeing here?</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/unnamed-chunk-2-3.png" width="700"></p>
<p>Ok, so we can draw a line and this establishes how many clusters we have (or vice versa), but also which nodes belong to which cluster. But how many clusters should we pick?</p>
</div>
<div id="identifying-number-of-clusters" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-number-of-clusters" class="anchor"></a>Identifying number of clusters</h2>
<p>To establish that, we need to iterate through all of our options, calculating for each how correlated this pattern is with the observed network. We then plot this and, using the “elbow method”, decide how many clusters.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggidentify_clusters</a></span><span class="op">(</span><span class="va">str_res</span>, <span class="va">structural_combo</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/idstrclust-1.png" width="700"></p>
<p>When there is one cluster for each vertex in the network, cell values will be identical to the observed correlation matrix, and when there is one cluster for the whole network, the values will all be equal to the average correlation across the observed matrix. So the correlations in each by-cluster matrix are correlated with the observed correlation matrix to see how well each by-cluster matrix fits the data.</p>
<p>Ok, so it looks here as if there is a clear bend in the elbow/knee at four clusters. This is reasonably parsimonious and well-fitting. More clusters than this only distinguishes nodes that are less dissimilar.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">str_clu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cutree.html">cutree</a></span><span class="op">(</span><span class="va">str_res</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  Chance Orville   Amber  Colton Phillip Patrick  Irving   Betty     Ada   Marie </span>
<span class="co">#&gt;       1       2       3       1       3       3       2       2       1       1 </span>
<span class="co">#&gt;   Molly  Darius  Norman Bernice   Carol   Ariel </span>
<span class="co">#&gt;       3       1       2       2       1       4</span></code></pre></div>
<p>We can use <code><a href="https://rdrr.io/r/stats/cutree.html">cutree()</a></code> to cut the tree at our desired point and return the resulting vector of cluster assignments. This we can use for various things. Most immediately, we may wish to see these cluster assignments mapped onto our networks. All we need to do is add the variable to existing networks and plot them:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m182_task</span> <span class="op">&lt;-</span> <span class="va">m182_task</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/coercion.html">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>clu <span class="op">=</span> <span class="va">str_clu</span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_task</span>, node_color <span class="op">=</span> <span class="st">"clu"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Task"</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strclu-plots-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m182_social</span> <span class="op">&lt;-</span> <span class="va">m182_social</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/coercion.html">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>clu <span class="op">=</span> <span class="va">str_clu</span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_social</span>, node_color <span class="op">=</span> <span class="st">"clu"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Social"</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strclu-plots-2.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m182_friend</span> <span class="op">&lt;-</span> <span class="va">m182_friend</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/coercion.html">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>clu <span class="op">=</span> <span class="va">str_clu</span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_friend</span>, node_color <span class="op">=</span> <span class="st">"clu"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Friend"</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strclu-plots-3.png" width="700"></p>
</div>
<div id="blockmodelling" class="section level2">
<h2 class="hasAnchor">
<a href="#blockmodelling" class="anchor"></a>Blockmodelling</h2>
<p>Now we can use the 4-cluster solution to generate blockmodels. ‘sna’ is required for this, but has already been loaded by ‘NetCluster’. We’ll do this on the valued network, but binary is possible too.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">task_blockmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">blockmodel</a></span><span class="op">(</span><span class="va">m182_task</span>, <span class="va">str_clu</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Network Blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Block membership:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Chance  Irving  Darius Orville  Norman Bernice   Betty     Ada   Amber  Colton </span>
<span class="co">#&gt;       1       2       3       1       3       3       2       2       1       1 </span>
<span class="co">#&gt;   Carol Phillip   Marie   Molly Patrick   Ariel </span>
<span class="co">#&gt;       3       1       2       2       1       4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Reduced form blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 </span>
<span class="co">#&gt;            Block 1 Block 2    Block 3 Block 4</span>
<span class="co">#&gt; Block 1 0.70000000    0.00 0.08333333       1</span>
<span class="co">#&gt; Block 2 0.03333333    0.85 0.10000000       1</span>
<span class="co">#&gt; Block 3 0.08333333    0.05 1.00000000       1</span>
<span class="co">#&gt; Block 4 1.00000000    1.00 1.00000000     NaN</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">task_blockmodel</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/structblock-1.png" width="700"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">friend_blockmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">blockmodel</a></span><span class="op">(</span><span class="va">m182_friend</span>, <span class="va">str_clu</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Network Blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Block membership:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Chance  Irving  Darius Orville  Norman Bernice   Betty     Ada   Amber  Colton </span>
<span class="co">#&gt;       1       2       3       1       3       3       2       2       1       1 </span>
<span class="co">#&gt;   Carol Phillip   Marie   Molly Patrick   Ariel </span>
<span class="co">#&gt;       3       1       2       2       1       4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Reduced form blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 </span>
<span class="co">#&gt;           Block 1    Block 2    Block 3 Block 4</span>
<span class="co">#&gt; Block 1 0.4666667 0.03333333 0.04166667       0</span>
<span class="co">#&gt; Block 2 0.1000000 0.90000000 0.10000000       0</span>
<span class="co">#&gt; Block 3 0.3333333 0.15000000 1.00000000       0</span>
<span class="co">#&gt; Block 4 0.0000000 0.00000000 0.00000000     NaN</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">friend_blockmodel</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/structblock-2.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">social_blockmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">blockmodel</a></span><span class="op">(</span><span class="va">m182_social</span>, <span class="va">str_clu</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Network Blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Block membership:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Chance  Irving  Darius Orville  Norman Bernice   Betty     Ada   Amber  Colton </span>
<span class="co">#&gt;       1       2       3       1       3       3       2       2       1       1 </span>
<span class="co">#&gt;   Carol Phillip   Marie   Molly Patrick   Ariel </span>
<span class="co">#&gt;       3       1       2       2       1       4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Reduced form blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 </span>
<span class="co">#&gt;           Block 1   Block 2 Block 3   Block 4</span>
<span class="co">#&gt; Block 1 0.7333333 0.2666667   0.375 0.8333333</span>
<span class="co">#&gt; Block 2 0.2333333 1.0000000   0.400 1.0000000</span>
<span class="co">#&gt; Block 3 0.3750000 0.4000000   1.000 0.2500000</span>
<span class="co">#&gt; Block 4 1.0000000 1.0000000   1.000       NaN</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">social_blockmodel</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/structblock-3.png" width="700"></p>
<p>What do these plots show?</p>
</div>
<div id="reduced-graph" class="section level2">
<h2 class="hasAnchor">
<a href="#reduced-graph" class="anchor"></a>Reduced graph</h2>
<p>Finally, we can reduce the graph to just interactions between roles. Let’s start off by graphing the valued/weighted blockmodel.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">social_reduced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">reduce_graph</a></span><span class="op">(</span><span class="va">social_blockmodel</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Freaks"</span>,<span class="st">"Squares"</span>,<span class="st">"Nerds"</span>,<span class="st">"Geek"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; IGRAPH 938d1d5 DNW- 4 15 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 938d1d5 (vertex names):</span>
<span class="co">#&gt;  [1] Freaks -&gt;Freaks  Freaks -&gt;Squares Freaks -&gt;Nerds   Freaks -&gt;Geek   </span>
<span class="co">#&gt;  [5] Squares-&gt;Freaks  Squares-&gt;Squares Squares-&gt;Nerds   Squares-&gt;Geek   </span>
<span class="co">#&gt;  [9] Nerds  -&gt;Freaks  Nerds  -&gt;Squares Nerds  -&gt;Nerds   Nerds  -&gt;Geek   </span>
<span class="co">#&gt; [13] Geek   -&gt;Freaks  Geek   -&gt;Squares Geek   -&gt;Nerds</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">social_reduced</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strredgraph-1.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">task_reduced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">reduce_graph</a></span><span class="op">(</span><span class="va">task_blockmodel</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Freaks"</span>,<span class="st">"Squares"</span>,<span class="st">"Nerds"</span>,<span class="st">"Geek"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; IGRAPH e6bd9bd DNW- 4 14 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from e6bd9bd (vertex names):</span>
<span class="co">#&gt;  [1] Freaks -&gt;Freaks  Freaks -&gt;Nerds   Freaks -&gt;Geek    Squares-&gt;Freaks </span>
<span class="co">#&gt;  [5] Squares-&gt;Squares Squares-&gt;Nerds   Squares-&gt;Geek    Nerds  -&gt;Freaks </span>
<span class="co">#&gt;  [9] Nerds  -&gt;Squares Nerds  -&gt;Nerds   Nerds  -&gt;Geek    Geek   -&gt;Freaks </span>
<span class="co">#&gt; [13] Geek   -&gt;Squares Geek   -&gt;Nerds</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">task_reduced</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strredgraph-2.png" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">friend_reduced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">reduce_graph</a></span><span class="op">(</span><span class="va">friend_blockmodel</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Freaks"</span>,<span class="st">"Squares"</span>,<span class="st">"Nerds"</span>,<span class="st">"Geek"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; IGRAPH 3484d9b DNW- 4 9 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 3484d9b (vertex names):</span>
<span class="co">#&gt; [1] Freaks -&gt;Freaks  Freaks -&gt;Squares Freaks -&gt;Nerds   Squares-&gt;Freaks </span>
<span class="co">#&gt; [5] Squares-&gt;Squares Squares-&gt;Nerds   Nerds  -&gt;Freaks  Nerds  -&gt;Squares</span>
<span class="co">#&gt; [9] Nerds  -&gt;Nerds</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">friend_reduced</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/strredgraph-3.png" width="700"></p>
<pre><code># ADVANCED: Note on deductive clustering:

# It's pretty straightforward to alter the code above to test hypotheses.
# Simply supply your own cluster vector, where the elements in the vector are in 
# the same order as the vertices in the matrix, and the values represent the
# cluster to which each vertex belongs. 

  task_social_cors &lt;- cor(task_social)
  
# For example, if you believed that actors 2, 7, and 8 formed one group, 
# actor 16 former another group, and everyone else formed a third group, 
# you could represent this as follows:
dedclust = c(1, 2, 1, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 3)

# Then examine the fitness of this cluster configuration as follows:
dedclust_mat &lt;- NetCluster::generate_cluster_cor_mat(task_social_cors, dedclust)
dedclust_mat
gcor(dedclust_mat, task_social_cors)</code></pre>
</div>
</div>
<div id="regular-equivalence" class="section level1">
<h1 class="hasAnchor">
<a href="#regular-equivalence" class="anchor"></a>Regular Equivalence</h1>
<div id="constructing-a-triad-census" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-triad-census" class="anchor"></a>Constructing a triad census</h2>
<p>We’re going to use the same pair of networks as with structural equivalence. But this time we’re not going to get the correlation of ties, but rather the correlation of profiles/patterns of local configurations. How can we identify patterns of local configurations? We’ll measure these profiles in terms of triad counts.</p>
<p>Now, there is a function for calculating triad censuses:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="fu"><a href="../reference/graph_triad_census.html">graph_triad_census</a></span><span class="op">(</span><span class="va">m182_task</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  003  012  102 021D 021U 021C 111D 111U 030T 030C  201 120D 120U 120C  210  300 </span>
<span class="co">#&gt;  133   38  212    2    0    1   14   13    0    0   93    1    0    0   11   42</span></code></pre></div>
<p>But as you can see, it just gives a aggregated tally for the whole network and not one differentiated by actor (which is what we need). Fortunately, <a href="https://github.com/snlab-ch/migraph">migraph</a> offers a node-level triad census too.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># (By putting parentheses around this command, it'll assign AND print!)</span>
<span class="op">(</span><span class="va">task_triads</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/census.html">node_triad_census</a></span><span class="op">(</span><span class="va">m182_task</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;       003 012 102 021D 021U 021C 111D 111U 030T 030C 201 120D 120U 120C 210 300</span>
<span class="co">#&gt;  [1,]  36   9  45    0    0    0    0    1    0    0   3    0    0    0   4   7</span>
<span class="co">#&gt;  [2,]  45  10  38    0    0    0    1    1    0    0   1    0    0    0   3   6</span>
<span class="co">#&gt;  [3,]  55   0  44    0    0    0    0    0    0    0   0    0    0    0   0   6</span>
<span class="co">#&gt;  [4,] 102   0   3    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt;  [5,]  55   0  37    0    0    0    2    1    0    0   4    0    0    0   0   6</span>
<span class="co">#&gt;  [6,]  65  19  10    0    0    0    5    0    0    0   3    1    0    0   2   0</span>
<span class="co">#&gt;  [7,]  91   1  13    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt;  [8,]  91   1  13    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt;  [9,]  90   1  14    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [10,]  86   1  18    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [11,]  95   0  10    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [12,]  90   1  14    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [13,]  93   1  11    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [14,]  90   3  12    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [15,]  88   2  15    0    0    0    0    0    0    0   0    0    0    0   0   0</span>
<span class="co">#&gt; [16,]   0   0   0    0    0    0    0    0    0    0  73    0    0    0   6  26</span></code></pre></div>
<p>Can you recall what these MAD codes mean? MAN might be easier to remember, for NULL dyads is the last, but MAD is probably more appropriate. <code><a href="https://rdrr.io/pkg/igraph/man/triad_census.html">?igraph::triad.census</a></code> can be used to check what each of the MAD codes means.</p>
<p>As with the structural equivalence, we can simply run our function and return an object that has hierarchically clustered our nodes, but this time it will be based on their (dis)similarity from each others patterns of ties.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">reg_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">cluster_regular_equivalence</a></span><span class="op">(</span><span class="va">m182_task</span><span class="op">)</span>
<span class="fu"><a href="../reference/blockmodel_visualisation.html">ggtree</a></span><span class="op">(</span><span class="va">reg_res</span>,<span class="fl">4</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/regeq-1.png" width="700"></p>
<p>Ok, so it looks like these nodes are much more similar in terms of their patterns of ties than their actual ties.</p>
<p>Like before, we’ll loop through each possible cluster solution and see how well they match the observed matrix of triad type correlations.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggidentify_clusters</a></span><span class="op">(</span><span class="va">reg_res</span>, <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">task_triads</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/regid-1.png" width="700"></p>
<p>The cluster correlation plot seems a bit ambiguous here, at least visually. But the elbow method has highlighted 2 clusters as a pretty good solution.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/blockmodel_visualisation.html">ggtree</a></span><span class="op">(</span><span class="va">reg_res</span>, <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/cutreereg-1.png" width="700"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">reg_clu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cutree.html">cutree</a></span><span class="op">(</span><span class="va">reg_res</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2</span>
<span class="va">m182_task</span> <span class="op">&lt;-</span> <span class="va">m182_task</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/coercion.html">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>regclu <span class="op">=</span> <span class="va">reg_clu</span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">m182_task</span>, node_color <span class="op">=</span> <span class="st">"regclu"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Task"</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/cutreereg-2.png" width="700"></p>
</div>
<div id="blockmodelling-1" class="section level2">
<h2 class="hasAnchor">
<a href="#blockmodelling-1" class="anchor"></a>Blockmodelling</h2>
<p>As before, we can use these clusters to blockmodel the task network.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">task_blockmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">blockmodel</a></span><span class="op">(</span><span class="va">m182_task</span>, <span class="va">reg_clu</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Network Blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Block membership:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Chance Orville   Amber  Colton Phillip Patrick  Irving   Betty     Ada   Marie </span>
<span class="co">#&gt;       1       1       1       1       1       1       1       1       1       1 </span>
<span class="co">#&gt;   Molly  Darius  Norman Bernice   Carol   Ariel </span>
<span class="co">#&gt;       1       1       1       1       1       2 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Reduced form blockmodel:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 </span>
<span class="co">#&gt;           Block 1 Block 2</span>
<span class="co">#&gt; Block 1 0.2761905       1</span>
<span class="co">#&gt; Block 2 1.0000000     NaN</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">task_blockmodel</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/regblock-1.png" width="700"></p>
</div>
<div id="reduced-graph-1" class="section level2">
<h2 class="hasAnchor">
<a href="#reduced-graph-1" class="anchor"></a>Reduced graph</h2>
<p>Finally, we can reduce the graph to just interactions between roles. Obviously this is not particularly informative with only two clusters though…</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">task_reduced</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blockmodel.html">reduce_graph</a></span><span class="op">(</span><span class="va">task_blockmodel</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Regulars"</span>,<span class="st">"Geek"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; IGRAPH e4db6e1 DNW- 2 3 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from e4db6e1 (vertex names):</span>
<span class="co">#&gt; [1] Regulars-&gt;Regulars Regulars-&gt;Geek     Geek    -&gt;Regulars</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">task_reduced</span><span class="op">)</span></code></pre></div>
<p><img src="blockmodel_files/figure-html/regredgraph-1.png" width="700"></p>
<p>Finally, we can try to get a sense of what our different clusters represent by generating a cluster-by-triad-type matrix. This is an m x n matrix, where m is the number of clusters and n is the 16 possible triad types. Each cell is the average number of the given triad type for each individual in the cluster:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/census.html">cluster_triad_census</a></span><span class="op">(</span><span class="va">m182_task</span>, <span class="va">reg_clu</span><span class="op">)</span>
<span class="co">#&gt;           003      012  102 021D 021U 021C      111D 111U 030T 030C        201</span>
<span class="co">#&gt; [1,] 78.13333 3.266667 19.8    0    0    0 0.5333333  0.2    0    0  0.7333333</span>
<span class="co">#&gt; [2,]  0.00000 0.000000  0.0    0    0    0 0.0000000  0.0    0    0 73.0000000</span>
<span class="co">#&gt;            120D 120U 120C 210       300</span>
<span class="co">#&gt; [1,] 0.06666667    0    0 0.6  1.666667</span>
<span class="co">#&gt; [2,] 0.00000000    0    0 6.0 26.000000</span></code></pre></div>
<pre><code># ADVANCED: Note that we can also blockmodel our communities from last week.
# walktrap_blockmodel &lt;- blockmodel(get.adjacency(m182_main, sparse = F), 
#                                   friend_wt$membership)
# plot(walktrap_blockmodel)
# walktrap_blockmodel
# # And graphs that from the reduced form blockmodels...
# walktrap_blockmodel_red &lt;- graph.adjacency(walktrap_blockmodel$block.model, weighted = T)
# plot(walktrap_blockmodel_red, edge.width = E(walktrap_blockmodel_red)$weight,
#      vertex.color = rainbow(2) )
# # Admittedly, not terribly interesting...
# 
# edgebet_blockmodel &lt;- blockmodel(get.adjacency(m182_main, sparse = F), 
#                                  friend_eb$membership)
# plot(edgebet_blockmodel) # blockmodel
# edgebet_blockmodel_red &lt;- graph.adjacency(edgebet_blockmodel$block.model, weighted = T)
# plot(edgebet_blockmodel_red, edge.width=E(edgebet_blockmodel_red)$weight,
#      vertex.color=rainbow(3) ) # reduced graph
# # Cool
# 
# fastgreed_blockmodel &lt;- blockmodel(get.adjacency(m182_main, sparse = F), 
#                                    friend_fg$membership)
# plot(fastgreed_blockmodel) # blockmodel
# fastgreed_blockmodel_red &lt;- graph.adjacency(fastgreed_blockmodel$block.model, weighted = T)
# plot(fastgreed_blockmodel_red, edge.width=E(fastgreed_blockmodel_red)$weight,
#      vertex.color=rainbow(3) ) # reduced graph</code></pre>
</div>
</div>
<div id="unit-test" class="section level1">
<h1 class="hasAnchor">
<a href="#unit-test" class="anchor"></a>Unit Test</h1>
<ol style="list-style-type: decimal">
<li>Visualise the m182 FRIENDSHIP network, sizing the vertices by constraint and identifying the structural hole What would being in a structural hole mean here?</li>
<li>Plot labelled, reduced graph of REGULARLY equivalent classes on friendship network only</li>
<li>Plot labelled, reduced graph of STRUCTURALLY equivalent classes on task network only</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://jameshollway.com">James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '204dadbc12ed450b5ef1209c8c44b558',
    indexName: 'migraph',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
