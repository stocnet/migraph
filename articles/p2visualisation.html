<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2. Visualisation • migraph</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="2. Visualisation">
<meta property="og:description" content="migraph">
<meta property="og:image" content="https://snlab-ch.github.io/migraph/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migraph</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/p1data.html">1. Data</a>
    </li>
    <li>
      <a href="../articles/p2visualisation.html">2. Visualisation</a>
    </li>
    <li>
      <a href="../articles/p3centrality.html">3. Centrality</a>
    </li>
    <li>
      <a href="../articles/p5equivalence.html">5. Equivalence</a>
    </li>
    <li>
      <a href="../articles/p7linearmodel.html">7. Testing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/snlab-ch/migraph" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="p2visualisation_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>2. Visualisation</h1>
                        <h4 data-toc-skip class="author">James Hollway</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/snlab-ch/migraph/blob/HEAD/vignettes/p2visualisation.Rmd" class="external-link"><code>vignettes/p2visualisation.Rmd</code></a></small>
      <div class="hidden name"><code>p2visualisation.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="packages-for-visualising-networks-in-r">Packages for visualising networks in R<a class="anchor" aria-label="anchor" href="#packages-for-visualising-networks-in-r"></a>
</h2>
<p>There are a host of packages for plotting in R, and for plotting networks in R. Plotting in R is typically based around two main approaches: the ‘base’ approach in R by default, and the ‘grid’ approach made popular by the famous and very flexible <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> package.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> Approaches to plotting <em>graphs</em> or <em>networks</em> in R can be similarly divided.</p>
<p>The two classic packages are <a href="https://igraph.org" class="external-link">igraph</a> and <a href="http://statnet.org" class="external-link">sna</a>, both building upon the base R graphics engine. Newer packages <a href="https://www.r-bloggers.com/2016/03/ggnetwork-network-geometries-for-ggplot2/" class="external-link"><code>{ggnetwork}</code></a> and <a href="https://ggraph.data-imaginist.com/index.html" class="external-link"><code>{ggraph}</code></a> build upon a grid approach.^[</p>
<p>Others include: ‘Networkly’ for creating 2-D and 3-D interactive networks that can be rendered with plotly and can be easily integrated into shiny apps or markdown documents; ‘visNetwork’ interacts with javascript (vis.js) to make interactive networks (<a href="http://datastorm-open.github.io/visNetwork/" class="external-link uri">http://datastorm-open.github.io/visNetwork/</a>); and ‘networkD3’ interacts with javascript (D3) to make interactive networks (<a href="https://www.r-bloggers.com/2016/10/network-visualization-part-6-d3-and-r-networkd3/" class="external-link uri">https://www.r-bloggers.com/2016/10/network-visualization-part-6-d3-and-r-networkd3/</a>). ]</p>
<p>This vignette introduces some functions in the <a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a> package for plotting and visualising network data. <a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a> builds upon the ggplot2/ggraph engine for plotting.</p>
</div>
<div class="section level2">
<h2 id="using-migraph-to-quickly-plot-network-graphs">Using <code>{migraph}</code> to quickly plot network graphs<a class="anchor" aria-label="anchor" href="#using-migraph-to-quickly-plot-network-graphs"></a>
</h2>
<p>To get a basic visualisation of the network before adding various specifications, the <code><a href="../reference/autographr.html">autographr()</a></code> function in <a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a> is a quick and easy way to obtain a clear first look of the network for preliminary investigations and understanding of the network.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">ison_brandes</span><span class="op">)</span></code></pre></div>
<p><img src="p2visualisation_files/figure-html/migrapheg-1.png" width="700"></p>
<p>We can also specify the colours, groups, shapes, and sizes of nodes in the <code><a href="../reference/autographr.html">autographr()</a></code> function using the following parameters:</p>
<ul>
<li><p><code>node_colour</code></p></li>
<li><p><code>node_shape</code></p></li>
<li><p><code>node_size</code></p></li>
</ul>
<p>Append <code><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle()</a></code> from the <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> package to add a title. <a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a> works well with both <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> and <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a> functions that can be appended to create more tailored visualisations of the network.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/autographr.html">autographr</a></span><span class="op">(</span><span class="va">ison_adolescents</span>,
           labels <span class="op">=</span> <span class="cn">TRUE</span>,
           node_size <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Visualisation"</span><span class="op">)</span></code></pre></div>
<p><img src="p2visualisation_files/figure-html/migraphexample2-1.png" width="700"></p>
<div class="section level3">
<h3 id="visualising-networks-over-time">Visualising networks over time<a class="anchor" aria-label="anchor" href="#visualising-networks-over-time"></a>
</h3>
<p>The <code><a href="../reference/gglineage.html">gglineage()</a></code> and <code><a href="../reference/ggevolution.html">ggevolution()</a></code> functions can be used to visualise changes in a network over time. <code><a href="../reference/gglineage.html">gglineage()</a></code> shows how observations are connected to preceding or succeeding observations. <code><a href="../reference/ggevolution.html">ggevolution()</a></code> plots two networks for comparison of the changes in their structure from one to the next.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mpn_elite_mex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate.html">generate_random</a></span><span class="op">(</span><span class="va">mpn_elite_mex</span><span class="op">)</span>
<span class="fu"><a href="../reference/ggevolution.html">ggevolution</a></span><span class="op">(</span><span class="va">mpn_elite_mex</span>, <span class="va">mpn_elite_mex2</span><span class="op">)</span></code></pre></div>
<p><img src="p2visualisation_files/figure-html/migrapheg3-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="using-ggraph-to-extend-these-plots">Using <code>{ggraph}</code> to extend these plots<a class="anchor" aria-label="anchor" href="#using-ggraph-to-extend-these-plots"></a>
</h2>
<p>For more flexibility with visualizations, <a href="https://github.com/snlab-ch/migraph" class="external-link">migraph</a> users are encouraged to use the excellent <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a> package. <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a> is built upon the venerable <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> package and works with <code>tbl_graph</code> and <code>igraph</code> objects. As with <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>, <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a> users are expected to build a particular plot from the ground up, adding explicit layers to visualise the nodes and edges.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html" class="external-link">ggraph</a></span><span class="op">(</span><span class="va">mpn_elite_mex</span>, layout <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html" class="external-link">geom_edge_link</a></span><span class="op">(</span>edge_colour <span class="op">=</span> <span class="st">"dark grey"</span>, 
                  arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>,
                                length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,
                                type <span class="op">=</span> <span class="st">"closed"</span><span class="op">)</span>,
                  end_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html" class="external-link">circle</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2.5</span>, shape <span class="op">=</span> <span class="fl">19</span>, colour <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html" class="external-link">geom_node_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">name</span><span class="op">)</span>, family <span class="op">=</span> <span class="st">"serif"</span>, size <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/scale_edge_width.html" class="external-link">scale_edge_width</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>,<span class="fl">1.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/theme_graph.html" class="external-link">theme_graph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></code></pre></div>
<p><img src="p2visualisation_files/figure-html/ggrapheg-1.png" width="700"></p>
<p>As we can see in the code above, we can specify various aspects of the plot to tailor it to our network. Firstly, we can alter the <strong>layout</strong> of the network using the <code>layout =</code> argument to create a clearer visualisation of the ties between nodes. This is especially important for larger networks, where nodes and ties are more easily obscured or misrepresented. In <a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a>, the default layout is the “stress” layout. The “stress” layout is a safe choice because it is deterministic and fits well with almost any graph, but it is also a good idea to explore and try out other layouts on your data. More layouts can be found in the <a href="http://graphlayouts.schochastics.net/" class="external-link">graphlayouts</a> and <a href="https://igraph.org" class="external-link">igraph</a> R packages. To use a layout from the <a href="https://igraph.org" class="external-link">igraph</a> package, enter only the last part of the layout algorithm name (eg. <code>layout = "mds"</code> for “layout_with_mds”).</p>
<p>Secondly, using <code><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point()</a></code> which draws the nodes as geometric shapes (circles, squares, or triangles), we can specify the presentation of <strong>nodes</strong> in the network in terms of their <em>shape</em> (<code>shape=</code>, choose from 1 to 21), <em>size</em> (<code>size=</code>), or <em>colour</em> (<code>colour=</code>). We can also use <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> to match to node attributes. To add labels, use <code><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html" class="external-link">geom_node_text()</a></code> or <code><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html" class="external-link">geom_node_label()</a></code> (draws labels within a box). The font (<code>family=</code>), font size (<code>size=</code>), and colour (<code>colour=</code>) of the labels can be specified.</p>
<p>Thirdly, we can also specify the presentation of <strong>edges</strong> in the network. To draw edges, we use <code><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html" class="external-link">geom_edge_link0()</a></code> or <code><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html" class="external-link">geom_edge_link()</a></code>. Using the latter function makes it possible to draw a straight line with a gradient. The following features can be tailored either globally or matched to specific edge attributes using <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code>:</p>
<ul>
<li><p><em>colour</em>: <code>edge_colour=</code></p></li>
<li><p><em>width</em>: <code>edge_width=</code></p></li>
<li><p><em>linetype</em>: <code>edge_linetype=</code></p></li>
<li><p><em>opacity</em>: <code>edge_alpha=</code></p></li>
</ul>
<p>For directed graphs, arrows can be drawn using the <code>arrow=</code> argument and the <code><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow()</a></code> function from <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>. The angle, length, arrowhead type, and padding between the arrowhead and the node can also be specified.</p>
<p>To change the position of the legend, add the <code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme()</a></code> function from <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>. The legend can be positioned at the top, bottom, left, or right, or removed using “none”.</p>
</div>
<div class="section level2">
<h2 id="exporting-plots-to-pdf">Exporting plots to PDF<a class="anchor" aria-label="anchor" href="#exporting-plots-to-pdf"></a>
</h2>
<p>We can print the plots we have made to PDF by point-and-click by selecting ‘Save as PDF…’ from under the ‘Export’ dropdown menu in the plots panel tab of RStudio.</p>
<p>If you want to do this programmatically, say because you want to record how you have saved it so that you can e.g. make some changes to the parameters at some point, this is also not too difficult.</p>
<p>After running the (gg-based) plot you want to save, use the command <code>ggsave("my_filename.pdf")</code> to save your plot as a PDF to your working directory. If you want to save it somewhere else, you will need to specify the file path (or change the working directory, but that might be more cumbersome). If you want to save it as a different filetype, replace <code>.pdf</code> with e.g. <code>.png</code> or <code>.jpeg</code>. See <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">?ggsave</a></code> for more.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><a href="https://ggplot2-book.org/networks.html#visualizing-networks" class="external-link"><strong>ggplot2</strong>: Elegant Graphics for Data Analysis</a></li>
<li><a href="https://kateto.net/network-visualization" class="external-link">Static and dynamic network visualization with R</a></li>
<li><a href="http://mr.schochastics.net/netVizR.html" class="external-link">Network Visualizations in R</a></li>
</ul>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>‘gg’ stands for the Grammar of Graphics.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
